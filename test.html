<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="js/jquery-1.6.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jquery.transit.min.js"></script>
        <script type="text/javascript" src="js/js.cookie.js"></script>
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <script>
            $(document).ready(function() {
        			var offset = 220;
			        var duration = 500;
		        $(window).scroll(function() {
        		    if ($(this).scrollTop() > offset) {
                	$('.back-to-top').fadeIn(duration);
		            } else {
        	        $('.back-to-top').fadeOut(duration);
           		}
	        });
        
   			     $('.back-to-top').click(function(event) {
            		event.preventDefault();
            	$('html, body').animate({scrollTop: $("#headerTap").offset().top}, duration);
            		return false;
        		})
    		});


                $(document).ready(function(){
                    alert("run");
                    var arrayOfItems = [];
                    var theBestPrice = 0;
                    var firstTime = true;//
    				Cookies.get('name');
                    $("#add").click(function(){
    				var itemType = $('#itemType').val();
    				var name = $('#name').val();
    				var quantity = $('#quantity').val();
    				var price = $('#price').val();

                    var item = {itemType:$('#itemType').val(), name:$('#name').val(), quantity:$('#quantity').val(), price: $('#price').val(), priceDBquantity:$('#price').val()/$('#quantity').val()};
                    arrayOfItems[arrayOfItems.length] = item;
                    arrayOfItems.sort(function(a,b) {
                        //Rearrange the array, so the best item will be at index 0
                        return a.priceDBquantity - b.priceDBquantity;
                    });

    				if(theBestPrice > arrayOfItems[0].priceDBquantity || firstTime){
                        theBestPrice = arrayOfItems[0].priceDBquantity;
                        if(firstTime == false)
                            {
                                $('#itemList ul li').first().remove();
                            }
                        
                        $('#itemList ul li').eq(0).before('<li class="list-group-item list-group-item-success" id="theBest">'+arrayOfItems[0].name +'<span class="badge">the best price</span></li>');
                        
                        if(arrayOfItems.length>1){

                        $('#itemList ul li').eq(1).after('<li class="list-group-item items"><div class="first-row"><h5>'+arrayOfItems[1].name+'</h5><h5 class="pull-right">2nd</h5></div>' +
                        '<div class="second-row"><h5><small>'+arrayOfItems[1].quantity+'U / $'+arrayOfItems[1].price+'</small></h5><h5 class="pull-right">'+arrayOfItems[1].price/quantity+' U/$</h5></div></li>');
                    }
                        //insert the best price 
                        firstTime = false;//
    				}
    				else
    				{
    					$("#itemList ul").append('<li class="list-group-item items"><div class="first-row"><h5>'+name+'</h5><h5 class="pull-right">2nd</h5></div>' +
    					'<div class="second-row"><h5><small>'+quantity+'U / $'+price+'</small></h5><h5 class="pull-right">'+price/quantity+' U/$</h5></div></li>');
    					
    				}
    				$('html, body').animate({
        			scrollTop: $("#downTag").offset().top}, 1000);
    				cookieName = 'pType_'+itemType;
    				cookieValue = name + ' ' + price + ' ' + quantity;
    				Cookies.set(cookieName, cookieValue, { expires: 7, path: '/' });
    				
                    });
                });
    			//$('body').click(function() {
    			//	$('body').transition({ scale: ($('body').css('scale')+0.5) });
    			//});
        </script>
        <style type="text/css">
            li.items {
            				float:left;
            				width:100%
            			}
            			li.items div {
            				clear:both;
            				width:100%;
            			}
            			li.items h5 {
            				display:inline-block;
            				float:left;
            				margin-bottom:5px;
            				margin-top:5px;
            			}
            			li.items h5 small {
            				display:inline-block;
            				float:right;
            				margin-left:5px;
            				
            			}
            			li.items .first-row h5.pull-right {
            				display:inline-block;
            				float:right;
            				color:green;
            			}
            			.form-control {
            				height:inherit;
            			}
          				.back-to-top {
    						position: fixed;
    						bottom: 2em;
    						right: 0px;
    						color: #000000;
    						background-color: rgba(0, 0, 0, 0.2);
    						padding: 8px;
    						display: none;
                        }

          				.back-to-top:hover {    
              				background-color: rgba(0, 0, 0, 0.1);
          				}
        </style>
    </head>
    
    <body>
        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="page-header">
                            <h3>Welcome to price Comparator
                                <font color="#777777">
                                    <br>
                                    <span style="font-size: 11px;">save your money</span>
                                </font>
                            </h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="view" id="headerTap">
                            <ul class="nav nav-tabs">
                                <li class="active">
                                    <a>Home</a>
                                </li>
                                <li>
                                    <a href="history.html">History</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <form>
                            <div class="form-group">
                                <label class="control-label" for="itemType">Product type:</label>
                                <select class="form-control" id="itemType">
                                    <option class="">milk</option>
                                    <option class="">Egg</option>
                                    <option class="">Rice</option>
                                    <option class="">Pasta</option>
                                    <option class="">Fish</option>
                                    <option class="">Cheese</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="itemQuantity">Product brand:</label>
                                <input type="text" class="form-control" id="name">
                            </div>
                            <div class="form-group" style="display:inline-block; width:67%;padding-right:5px;">
                                <label class="control-label" for="itemQuantity">Quantity:</label>
                                <input class="form-control" id="quantity" placeholder="Enter the quantity"
                                type="number">
                            </div>
                            <div class="form-group has-feedback" style="display:inline-block; width:33%;">
                                <label class="control-label" for="item price">Price:</label>
                                <input class="form-control" id="price" type="number">
                            </div>
                        </form>
                        <button id="add" class="btn btn-block btn-primary">Add
                            <img src="img/plus.png" class="img-circle">
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6" id="itemList">
                        <br>
                        <lable class="lable">Prices list:</lable>
                        <ul class="list-group" id="itemList">
                          <li class="hidden-lg hidden-md hidden-sm hidden-xs" ></li>  
                        </ul>
                    </div>
                </div>
                <dev id="downTag"></dev>
                <a href="#" class="back-to-top"><img src="img/up.png" class="img-responsive"></a>
            </div>
            <br>
        </div>
    </body>

</html>